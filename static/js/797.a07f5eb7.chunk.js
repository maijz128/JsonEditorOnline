"use strict";(self.webpackChunkjsoneditoronline=self.webpackChunkjsoneditoronline||[]).push([[797],{1797:function(e,n,t){t.r(n),t.d(n,{default:function(){return Me}});var o=t(1413),a=t(4165),s=t(5861),r=t(885),i=t(6850),c=t(1632),l=t(9806),d=t(1694),u=t.n(d),h=t(2791),p=t(5731),m=t(3708),f=t(4757),x=t(902),v=t(5762),j=t(7802),g=t(2480),b=(0,g.H)("jsoneditoronline:useSchema"),C={type:"NONE",leftPanel:!1,rightPanel:!1};function N(e){return e&&(0,x.mU)({schema:e}),e}var y=t(184);function k(e){var n=e.error,t=e.onNew,o=(0,h.useState)(!1),a=(0,r.Z)(o,2),s=a[0],i=a[1];return(0,y.jsxs)("div",{className:"loading-error",children:[(0,y.jsx)(l.G,{icon:c.eHv})," ",n.toString(),n.reasons&&s&&(0,y.jsxs)("div",{className:"reasons",children:[(0,y.jsx)("br",{}),"Possible reasons:",(0,y.jsx)("ul",{children:n.reasons.map((function(e,n){return(0,y.jsx)("li",{children:e},n)}))})]}),(0,y.jsxs)("div",{className:"suggestion",children:[(0,y.jsxs)("button",{className:"action primary",onClick:t,children:[(0,y.jsx)(l.G,{icon:c.gMD})," Open a new document"]}),n.reasons&&!s&&(0,y.jsxs)("button",{className:"action",onClick:function(){i(!0)},children:[(0,y.jsx)(l.G,{icon:c.Fuz})," Read more"]})]})]})}var S=t(5671),w=t(3144),O=t(7326),Z=t(9340),E=t(8557),T=function(e){(0,Z.Z)(t,e);var n=(0,E.Z)(t);function t(e){var o;return(0,S.Z)(this,t),(o=n.call(this,e)).backgroundRef=null,o.handleRequestClose=o.handleRequestClose.bind((0,O.Z)(o)),o.handleKeyDown=o.handleKeyDown.bind((0,O.Z)(o)),o.close=o.close.bind((0,O.Z)(o)),o}return(0,w.Z)(t,[{key:"render",value:function(){var e=this;return(0,y.jsx)("div",{ref:function(n){e.backgroundRef=n},className:u()("modal-background",this.props.className),onClick:this.handleRequestClose,children:(0,y.jsx)("div",{className:u()("modal-foreground",this.props.className),children:this.props.children})})}},{key:"componentDidMount",value:function(){window.addEventListener("keydown",this.handleKeyDown),document.activeElement&&"function"===typeof document.activeElement.blur&&document.activeElement.blur()}},{key:"componentWillUnmount",value:function(){window.removeEventListener("keydown",this.handleKeyDown)}},{key:"handleRequestClose",value:function(e){e.target===this.backgroundRef&&(e.preventDefault(),e.stopPropagation(),this.props.onRequestClose())}},{key:"handleKeyDown",value:function(e){var n=this;27===e.which&&(e.preventDefault(),e.stopPropagation(),clearTimeout(R),R=setTimeout((function(){return n.props.onRequestClose()}),0))}},{key:"close",value:function(){this.componentWillUnmount()}}]),t}(h.PureComponent),R=null,I=t(1250),D=function(e){(0,Z.Z)(t,e);var n=(0,E.Z)(t);function t(e){var o;return(0,S.Z)(this,t),(o=n.call(this,e)).okRef=null,o.modalRef=null,o.handleCancel=o.handleCancel.bind((0,O.Z)(o)),o.handleOk=o.handleOk.bind((0,O.Z)(o)),o.close=o.close.bind((0,O.Z)(o)),o}return(0,w.Z)(t,[{key:"render",value:function(){var e=this;return(0,y.jsx)(T,{ref:function(n){e.modalRef=n},onRequestClose:this.handleCancel,children:(0,y.jsxs)("div",{className:"modal modal-confirm",children:[(0,y.jsx)("h1",{children:this.props.title}),(0,y.jsx)("div",{className:"modal-text",children:this.props.text}),(0,y.jsxs)("div",{className:"modal-action-menu",children:[(0,y.jsx)("button",{className:u()("modal-button",this.props.classCancel),onClick:this.handleCancel,children:this.props.textCancel||"Cancel"}),(0,y.jsx)("button",{ref:function(n){e.okRef=n},onClick:this.handleOk,className:u()("modal-button","primary",this.props.classOk),children:this.props.textOk||"Ok"})]})]})})}},{key:"componentDidMount",value:function(){var e=this;setTimeout((function(){return e.okRef.focus()}))}},{key:"handleOk",value:function(e){e.preventDefault(),this.close(),this.props.onOk&&this.props.onOk()}},{key:"handleCancel",value:function(){this.close(),this.props.onCancel&&this.props.onCancel()}},{key:"close",value:function(){this.modalRef.close(),this.props.onClose()}}]),t}(h.PureComponent);function L(e){var n=document.createElement("div");document.body.appendChild(n),(0,I.s)(n).render((0,y.jsx)(D,(0,o.Z)((0,o.Z)({},e),{},{onClose:function(){document.body.removeChild(n)}})))}var P=t(8045),G=t(3055);function J(e){var n=e.document,t=e.compoundKey,o=e.onClose,a=(0,j.xt)(t).documentSource,s=m._X[a];return(0,y.jsx)(T,{onRequestClose:o,className:"document-properties",children:(0,y.jsxs)("div",{className:"modal modal-document-properties",children:[(0,y.jsx)("h1",{children:"Document properties"}),(0,y.jsx)("table",{className:"properties",children:(0,y.jsxs)("tbody",{children:[(0,y.jsxs)("tr",{children:[(0,y.jsx)("th",{children:"Name"}),(0,y.jsx)("td",{children:n.name||"-"})]}),(0,y.jsxs)("tr",{children:[(0,y.jsx)("th",{children:"Storage"}),(0,y.jsxs)("td",{children:[a||"-",s?" (".concat(s,")"):""]})]}),(0,y.jsxs)("tr",{children:[(0,y.jsx)("th",{children:"Updated"}),(0,y.jsx)("td",{children:n.updated?(0,P.p6)(n.updated):"-"})]}),(0,y.jsxs)("tr",{children:[(0,y.jsx)("th",{children:"Contents"}),(0,y.jsx)("td",{children:(0,j.sd)(n.content)})]}),(0,y.jsxs)("tr",{children:[(0,y.jsx)("th",{children:"Size"}),(0,y.jsx)("td",{children:(0,G.BU)((0,j.ho)(n.content,JSON).length)})]})]})}),(0,y.jsx)("div",{className:"modal-action-menu",children:(0,y.jsx)("button",{className:"modal-button",onClick:o,children:"Close"})})]})})}function q(e){var n=document.createElement("div");document.body.appendChild(n),(0,I.s)(n).render((0,y.jsx)(J,(0,o.Z)((0,o.Z)({},e),{},{onClose:function(){document.body.removeChild(n)}})))}var U=t(4942),K=t(1482),z=t(790);function V(e){var n=e.onOpen,t=e.onClose,i=e.onDelete,d=(0,h.useRef)(null),p=(0,h.useRef)(null),m=(0,h.useState)(""),f=(0,r.Z)(m,2),x=f[0],v=f[1],g=(0,h.useState)((0,K.nn)()),b=(0,r.Z)(g,2),C=b[0],N=b[1],k=(0,h.useState)({}),S=(0,r.Z)(k,2),w=S[0],O=S[1],Z=!(0,z.Z)(x.trim()),E=Z?C.filter((function(e){return e.name.toLowerCase().includes(x.toLowerCase())})):C;function R(){d.current.close(),t()}function I(){return I=(0,s.Z)((0,a.Z)().mark((function e(n){var t,r=arguments;return(0,a.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:t=r.length>1&&void 0!==r[1]?r[1]:(0,j.xt)(n).documentId,L({title:"Delete document",text:'Are you sure you want to delete document "'.concat(t,'"?'),textOk:"Delete",classOk:"danger",onOk:function(){var e=(0,s.Z)((0,a.Z)().mark((function e(){return(0,a.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return O((0,o.Z)((0,o.Z)({},w),{},(0,U.Z)({},n,!0))),e.next=3,i(n);case 3:N((0,K.nn)()),O((0,o.Z)((0,o.Z)({},w),{},(0,U.Z)({},n,!1)));case 5:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}()});case 2:case"end":return e.stop()}}),e)}))),I.apply(this,arguments)}function D(){R()}return(0,h.useEffect)((function(){p.current&&p.current.focus()}),[p]),(0,y.jsx)(T,{ref:d,onRequestClose:D,children:(0,y.jsxs)("div",{className:"modal modal-open",children:[(0,y.jsx)("h1",{children:"Open a recent file"}),(0,y.jsxs)("div",{className:"search-box",children:[(0,y.jsx)("span",{className:"label",children:"Search:"}),(0,y.jsx)("input",{ref:p,className:"search-text",placeholder:"Enter a document name...",value:x,onChange:function(e){return v(e.target.value)}})]}),(0,y.jsx)("div",{className:"info",children:Z?"Showing ".concat(E.length," out of ").concat(C.length," documents"):"Showing ".concat(C.length," documents")}),(0,y.jsx)("div",{className:"recent-files",children:(0,z.Z)(E)?(0,y.jsx)("div",{className:"no-files",children:"(no recent files)"}):E.map((function(e){var t=w[e.compoundKey]||!1,o=u()({"recent-file":!0,deleting:t});return(0,y.jsxs)("div",{className:o,children:[(0,y.jsxs)("button",{className:"modal-button open",title:"Click to open this document",disabled:t,onClick:function(){return t=e.compoundKey,R(),void n(t);var t},children:[(0,j.Rn)(e.compoundKey)&&(0,y.jsxs)("span",{title:"This document is stored in the cloud",children:[(0,y.jsx)(l.G,{icon:c.uM9})," "]}),e.name,t?" (deleting...)":null,(0,y.jsxs)("div",{className:"updated",children:["Last modified: ",e.updated?(0,P.p6)(e.updated):"(unknown)"]})]}),(0,y.jsx)("button",{className:"modal-button remove",disabled:t,title:"Click to delete this document",onClick:function(){return function(e){return I.apply(this,arguments)}(e.compoundKey,e.name)},children:(0,y.jsx)(l.G,{icon:c.NBC})})]},e.compoundKey)}))}),(0,y.jsx)("div",{className:"modal-action-menu",children:(0,y.jsx)("button",{className:"modal-button",onClick:D,children:"Cancel"})})]})})}function M(e){var n=document.createElement("div");document.body.appendChild(n),(0,I.s)(n).render((0,y.jsx)(V,{onOpen:e.onOpen,onDelete:e.onDelete,onClose:function(){document.body.removeChild(n)}}))}var W=function(e){(0,Z.Z)(t,e);var n=(0,E.Z)(t);function t(e){var o;return(0,S.Z)(this,t),(o=n.call(this,e)).state={value:e.value,optionValue:e.optionValue||null,checkboxValue:e.checkboxValue||!1,showValidationResult:!1},o.valueRef=null,o.modalRef=null,o.handleOk=o.handleOk.bind((0,O.Z)(o)),o.handleCancel=o.handleCancel.bind((0,O.Z)(o)),o.handleChange=o.handleChange.bind((0,O.Z)(o)),o.handleChangeOption=o.handleChangeOption.bind((0,O.Z)(o)),o.handleChangeCheckbox=o.handleChangeCheckbox.bind((0,O.Z)(o)),o.close=o.close.bind((0,O.Z)(o)),o}return(0,w.Z)(t,[{key:"render",value:function(){var e=this,n=this.props.validate&&this.state.showValidationResult?this.props.validate(this.state.value):null;return(0,y.jsx)(T,{ref:function(n){e.modalRef=n},className:this.props.className,onRequestClose:this.handleCancel,children:(0,y.jsxs)("div",{className:"modal modal-prompt",children:[(0,y.jsx)("h1",{children:this.props.title}),(0,y.jsx)("div",{className:"modal-text",children:this.props.text}),(0,y.jsxs)("form",{onSubmit:this.handleOk,children:[(0,y.jsx)("input",{ref:function(n){e.valueRef=n},type:"text",className:u()("regular",{error:n}),value:this.state.value,onChange:this.handleChange}),this.props.optionOptions&&(0,y.jsxs)("div",{className:"options",children:[this.props.optionText&&(0,y.jsxs)("div",{children:[this.props.optionText,":"]}),(0,y.jsx)("select",{value:this.state.optionValue,title:this.props.optionTitle,onChange:this.handleChangeOption,children:this.props.optionOptions.map((function(e){return(0,y.jsx)("option",{value:e.value,children:e.text},e.value)}))})]}),this.props.checkboxText&&(0,y.jsxs)("label",{title:this.props.checkboxTitle,children:[(0,y.jsx)("input",{type:"checkbox",checked:this.state.checkboxValue,onChange:this.handleChangeCheckbox})," ",this.props.checkboxText]})]}),n&&(0,y.jsx)("div",{className:"error-message",children:n}),(0,y.jsxs)("div",{className:"modal-action-menu",children:[(0,y.jsx)("button",{className:u()("modal-button",this.props.classCancel),onClick:this.handleCancel,children:this.props.textCancel||"Cancel"}),(0,y.jsx)("button",{onClick:this.handleOk,className:u()("modal-button","primary",this.props.classOk),children:this.props.textOk||"Ok"})]})]})})}},{key:"componentDidMount",value:function(){var e=this;setTimeout((function(){return e.valueRef.select()}),0)}},{key:"handleOk",value:function(e){if((e.preventDefault(),this.props.validate)&&null!=this.props.validate(this.state.value))return this.setState({showValidationResult:!0}),void this.valueRef.select();this.close(),this.props.onOk&&this.props.onOk(this.state.value,this.state.optionValue,this.state.checkboxValue)}},{key:"handleCancel",value:function(){this.close(),this.props.onCancel&&this.props.onCancel()}},{key:"handleChange",value:function(){this.setState({value:this.valueRef.value})}},{key:"handleChangeOption",value:function(e){var n=e.target.value;this.setState({optionValue:n}),this.props.optionChange&&this.props.optionChange(n)}},{key:"handleChangeCheckbox",value:function(e){var n=e.target.checked;this.setState({checkboxValue:n}),this.props.checkboxChange&&this.props.checkboxChange(n)}},{key:"close",value:function(){this.modalRef.close(),this.props.onClose()}}]),t}(h.PureComponent);function F(e){var n=document.createElement("div");document.body.appendChild(n),(0,I.s)(n).render((0,y.jsx)(W,(0,o.Z)((0,o.Z)({},e),{},{onClose:function(){document.body.removeChild(n)}})))}function A(e){var n=e.options,t=e.value,o=e.onChange,a=e.className;return(0,y.jsx)("div",{className:u()("toggle",a),children:n.map((function(e){var n=u()({className:e.className,selected:e.value===t});return(0,y.jsx)("button",{className:n,onClick:function(n){n.preventDefault(),o(e.value)},children:e.text},String(e.value))}))})}var B=t(643),Q=t(5781),H=t(8510),_=(0,g.H)("jsoneditoronline:JSONEditorComponent"),X=[x.q1,x.Hd],Y=function(e){(0,Z.Z)(t,e);var n=(0,E.Z)(t);function t(){var e;(0,S.Z)(this,t);for(var o=arguments.length,a=new Array(o),s=0;s<o;s++)a[s]=arguments[s];return(e=n.call.apply(n,[this].concat(a))).memoizeValidator=(0,Q.Z)((function(e,n){if(e)try{return _("createAjvValidator",{schema:e,schemaDefinitions:n}),(0,x.mU)({schema:e,schemaDefinitions:n})}catch(t){return _("failed to compile validator:",t.toString()),function(){return[{path:[],message:t.toString()}]}}}),B.Z),e.memoizeOnRenderValue=(0,Q.Z)((function(e,n){return e?function(t){return(0,x.VV)(t,e,n)||(0,x.Q2)(t)}:x.Q2})),e}return(0,w.Z)(t,[{key:"componentDidMount",value:function(){_("componentDidMount"),this.jsoneditor=new x.q9({target:this.container,props:(0,o.Z)({onError:function(e){console.error(e),(0,H.cB)((0,y.jsx)("div",{className:"parse-error",children:(0,y.jsx)("code",{children:e.toString()})}))},validator:this.memoizeValidator(this.props.schema,this.props.schemaDefinitions),onRenderValue:this.memoizeOnRenderValue(this.props.schema,this.props.schemaDefinitions),queryLanguages:X},this.props)}),this.props.onJsonEditorRef&&this.props.onJsonEditorRef(this.jsoneditor),this.props.id&&(window.jsoneditors||(window.jsoneditors={}),window.jsoneditors[this.props.id]=this.jsoneditor)}},{key:"componentDidUpdate",value:function(e){this.jsoneditor.updateProps(this.props),this.props.schema===e.schema&&this.props.schemaDefinitions===e.schemaDefinitions||this.jsoneditor.updateProps({validator:this.memoizeValidator(this.props.schema,this.props.schemaDefinitions),onRenderValue:this.memoizeOnRenderValue(this.props.schema,this.props.schemaDefinitions)})}},{key:"componentWillUnmount",value:function(){_("componentWillUnmount"),this.jsoneditor&&(this.jsoneditor.destroy(),this.jsoneditor=null,this.schema=null,this.schemaDefinitions=null)}},{key:"render",value:function(){var e=this;return(0,y.jsx)("div",{className:u()("jsoneditor-react-container",this.props.className,{"read-only":this.props.readOnly}),ref:function(n){e.container=n}})}}]),t}(h.PureComponent);function $(e){var n=e.url,t=e.indentation,o=e.queryLanguageId,a=e.onChangeQueryLanguage,s=(0,f.r5)(v.c6,[n]),r=s.loading,i=s.result,c=s.error;return c?(0,y.jsx)("div",{className:"error",children:c.toString()}):r?(0,y.jsx)("div",{className:"loading",children:"Loading..."}):(0,y.jsx)(Y,{mode:"tree",readOnly:!0,indentation:t,mainMenuBar:!1,navigationBar:!1,queryLanguageId:o,onChangeQueryLanguage:a,content:{json:i}})}var ee=t(6944),ne=t.n(ee);function te(e){var n=e.panelId,t=e.allPanels,o=e.indentation,a=e.queryLanguageId,s=e.onChangeQueryLanguage,r=t.find((function(e){return e.panelId===n}));try{return r?(0,y.jsx)(Y,{mode:"tree",parser:JSON,readOnly:!0,indentation:o,mainMenuBar:!1,navigationBar:!1,queryLanguageId:a,onChangeQueryLanguage:s,content:r.document.content}):(0,y.jsxs)("div",{className:"error",children:["Error: Cannot show preview. Panel with id ",n," not found."]})}catch(i){return(0,y.jsxs)("div",{className:"error",children:["Error: Cannot show preview. The ",m.nW[n]," panel contains a JSON parse error."]})}}function oe(e){var n=e.compoundKey,t=e.indentation,o=e.queryLanguageId,a=e.onChangeQueryLanguage;return(0,y.jsxs)("div",{className:"cloud-document-schema-preview",children:["Preview:",(0,y.jsx)("div",{className:"preview",children:n?(0,y.jsx)(ae,{compoundKey:n,indentation:t,queryLanguageId:o,onChangeQueryLanguage:a}):(0,y.jsx)("div",{className:"info",children:"(Select a document)"})})]})}function ae(e){var n=e.compoundKey,t=e.indentation,o=e.queryLanguageId,a=e.onChangeQueryLanguage,s=(0,f.r5)(j.Tq,[n]),r=s.loading,i=s.result,c=s.error;if(c)return(0,y.jsx)("div",{className:"error",children:c.toString()});if(r)return(0,y.jsx)("div",{className:"loading",children:"Loading..."});try{return(0,y.jsx)(Y,{mode:"tree",parser:JSON,readOnly:!0,indentation:t,mainMenuBar:!1,navigationBar:!1,queryLanguageId:o,onChangeQueryLanguage:a,content:i.content})}catch(l){return console.error(l),(0,y.jsx)("div",{className:"error",children:"Error: Cannot show preview. The selected document contains a JSON parse error."})}}function se(e){var n=e.initialSchema,t=e.indentation,a=e.queryLanguageId,s=e.onChangeQueryLanguage,i=e.panelId,d=e.allPanels,p=e.onOk,f=e.onClose,x=(0,h.useRef)(null),v=(0,h.useState)(n||{type:"NONE"}),g=(0,r.Z)(v,2),b=g[0],C=g[1],N=JSON;function k(){x.current.close(),f()}function S(){k()}var w=(0,K.nn)(),O=d.find((function(e){return e.panelId!==i}));return(0,y.jsx)(T,{ref:x,onRequestClose:S,className:"schema",children:(0,y.jsxs)("div",{className:"modal modal-schema",children:[(0,y.jsx)("h1",{children:"JSON schema"}),(0,y.jsxs)("p",{children:["Configure a JSON schema for the ",m.nW[i]," panel:"]}),(0,y.jsxs)("div",{className:"contents",children:[(0,y.jsx)(A,{options:[{value:"NONE",text:"None"},{value:"PANEL",text:"Panel"},{value:"DOCUMENT",text:"Document"},{value:"TEXT",text:"Text"},{value:"URL",text:"Url"}],value:b.type,onChange:function(e){var n=d.find((function(e){return e.panelId!==i}));C((0,o.Z)((0,o.Z)({},b),{},{type:e,panelId:void 0===b.panelId&&n?n.panelId:b.panelId}))}}),"NONE"===b.type&&(0,y.jsx)("div",{className:"config",children:"No JSON Schema."}),"PANEL"===b.type&&(0,y.jsx)("div",{className:"config",children:b.panelId?b.panelId!==i?(0,y.jsxs)(y.Fragment,{children:[(0,y.jsxs)("p",{children:[m.ar[b.panelId]," panel contents will be used as JSON Schema."]}),(0,y.jsx)("p",{children:"Preview:"}),(0,y.jsx)("div",{className:"schema-panel-preview",children:(0,y.jsx)(te,{panelId:b.panelId,allPanels:d,parser:N,indentation:t,queryLanguageId:a,onChangeQueryLanguage:s})})]}):(0,y.jsxs)("div",{className:"error",children:[(0,y.jsxs)("p",{children:["Error: Currently the ",m.nW[i]," panel itself is selected as JSON Schema. This is not possible."]}),(0,y.jsx)("p",{children:(0,y.jsxs)("button",{className:"fix-panel",onClick:function(){return function(e){C((0,o.Z)((0,o.Z)({},b),{},{panelId:e}))}(O.panelId)},children:["Select ",m.nW[O.panelId]," panel"]})})]}):null}),"DOCUMENT"===b.type&&(0,y.jsxs)("div",{className:"config cloud-document",children:[(0,y.jsxs)("div",{className:"list-column",children:["Select a document as JSON Schema:",(0,y.jsx)("div",{className:"recent-files",children:(0,z.Z)(w)?(0,y.jsx)("div",{className:"no-files",children:"(no recent files)"}):w.map((function(e){var n=u()("modal-button","recent-file",{selected:e.compoundKey===b.compoundKey});return(0,y.jsxs)("button",{className:n,title:"Select this file as JSON Schema",onClick:function(){return C((0,o.Z)((0,o.Z)({},b),{},{compoundKey:e.compoundKey}))},children:[(0,j.Rn)(e.compoundKey)&&(0,y.jsxs)("span",{title:"This document is stored in the cloud",children:[(0,y.jsx)(l.G,{icon:c.uM9})," "]}),e.name,(0,y.jsxs)("div",{className:"updated",children:["Last modified: ",e.updated?(0,P.p6)(e.updated):"(unknown)"]})]},e.compoundKey)}))})]}),(0,y.jsx)("div",{className:"preview-column",children:(0,y.jsx)(oe,{compoundKey:b.compoundKey,queryLanguageId:a,onChangeQueryLanguage:s})})]}),"TEXT"===b.type&&(0,y.jsxs)("div",{className:"config config-jsoneditor",children:[(0,y.jsx)("p",{children:"Enter the contents of the JSON Schema:"}),(0,y.jsx)(Y,{className:"text-schema",indentation:t,queryLanguageId:a,onChangeQueryLanguage:s,content:b.content?b.content:{json:{}},onChange:function(e){C((0,o.Z)((0,o.Z)({},b),{},{content:e}))}})]}),"URL"===b.type&&(0,y.jsxs)("div",{className:"config",children:[(0,y.jsx)("p",{children:"Specify the url of the JSON Schema."}),(0,y.jsx)("p",{children:"The url must be public: it must not require authentication and needs to have CORS enabled."}),(0,y.jsx)("input",{className:"regular schema-url",type:"text",value:b.url||"",onChange:function(e){return C((0,o.Z)((0,o.Z)({},b),{},{url:e.target.value}))}}),(0,y.jsxs)("div",{children:[(0,y.jsx)("p",{children:"Preview:"}),(0,y.jsx)("div",{className:"schema-url-preview",children:b.url&&ne()(b.url)?(0,y.jsx)($,{url:b.url,indentation:t,queryLanguageId:a,onChangeQueryLanguage:s}):(0,y.jsx)("div",{className:"info",children:"(enter a valid url)"})})]})]})]}),(0,y.jsxs)("div",{className:"modal-action-menu",children:[(0,y.jsx)("button",{className:"modal-button",onClick:S,children:"Cancel"}),(0,y.jsx)("button",{className:"modal-button primary",onClick:function(){p(function(e){var n=e.type,t=e.url,o=e.compoundKey,a=e.content,s=e.panelId;switch(n){case"NONE":return{type:n};case"URL":return{type:n,url:t};case"DOCUMENT":return{type:n,compoundKey:o};case"TEXT":return{type:n,content:a};case"PANEL":return{type:n,panelId:s};default:return console.error("Unknown type of schemaConfig",e),e}}(b)),k()},children:"Ok"})]})]})})}function re(e){var n=document.createElement("div");document.body.appendChild(n),(0,I.s)(n).render((0,y.jsx)(se,{panelId:e.panelId,allPanels:e.allPanels,initialSchema:e.initialSchema,indentation:e.indentation,queryLanguageId:e.queryLanguageId,onChangeQueryLanguage:e.onChangeQueryLanguage,onOk:e.onOk,onClose:function(){document.body.removeChild(n)}}))}var ie=t(8029),ce=t.n(ie);function le(){var e=(0,h.useRef)(null),n=(0,h.useCallback)((function(){null!=e.current&&(window.clearTimeout(e.current),e.current=null)}),[]),t=(0,h.useCallback)((function(n,t){null!=e.current&&window.clearTimeout(e.current),e.current=window.setTimeout(n,t)}),[]);return(0,h.useEffect)((function(){return function(){n()}}),[n]),[t,n]}var de=(0,g.H)("jsoneditoronline:CopyToClipboardButton");function ue(e){var n=e.data,t=e.text,o=e.title,a=e.copiedText,s=(0,h.useState)(!1),c=(0,r.Z)(s,2),d=c[0],u=c[1],p=le(),m=(0,r.Z)(p,1)[0];return(0,y.jsx)(ce(),{text:n,onCopy:function(){de("Text copied to clipboard",{data:n}),u(!0),m((function(){return u(!1)}),1e3)},className:"modal-button primary copy-clipboard ",children:(0,y.jsxs)("div",{className:"modal-button primary",children:[(0,y.jsx)(l.G,{icon:i.kZ_,title:o}),d&&a?" ".concat(a):t?" ".concat(t):void 0]})})}function he(e){var n=e.document,t=e.compoundKey,o=e.onClose,a=n.name?'document "'.concat(n.name,'"'):"";return(0,y.jsx)(T,{onRequestClose:o,className:"share",children:(0,y.jsxs)("div",{className:"modal modal-share",children:[(0,y.jsxs)("h1",{children:["Share ",a]}),pe(t),(0,y.jsx)("div",{className:"modal-action-menu",children:(0,y.jsx)("button",{className:"modal-button",onClick:o,children:"Close"})})]})})}function pe(e){if((0,j.U4)(e))return(0,y.jsxs)("div",{children:[(0,y.jsx)("p",{children:"This document is stored locally in your browser and cannot be shared."}),(0,y.jsx)("p",{children:'To share this document, save it in the cloud first via menu "Save", "Save to cloud".'})]});if((0,j.Rn)(e)){var n=(0,j.AC)(e);return(0,y.jsxs)("div",{className:"share-contents",children:[(0,y.jsx)("input",{readOnly:!0,value:n,className:"url-contents"}),(0,y.jsx)(ue,{data:n,title:"Copy url to clipboard",copiedText:"Copied!",className:"modal-button primary"})]})}return(0,y.jsx)("div",{children:"Cannot create a sharable url. Please save the document in the cloud first."})}function me(e){var n=document.createElement("div");document.body.appendChild(n),(0,I.s)(n).render((0,y.jsx)(he,(0,o.Z)((0,o.Z)({},e),{},{onClose:function(){document.body.removeChild(n)}})))}var fe=t(9843),xe=t(2296),ve=t(3379),je=t(4092);function ge(e){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"_",t={};function o(e,a){for(var s in e){var r=a?a+n+s:s;(0,je._Z)(e[s])?o(e[s],r):t[r]=e[s]}}return o(e,""),t}var be=t(5462),Ce=t(5577),Ne=(0,g.H)("jsoneditoronline:CSVExportModal"),ye={header:!0,flatten:!0};function ke(e){var n=e.parser,t=e.document,a=e.onClose,s=t.content,i=(0,fe.Z)("csvExportOptions",ye),d=(0,r.Z)(i,2),p=d[0],m=d[1],f=(0,h.useState)(t.name||"document"),x=(0,r.Z)(f,2),v=x[0],j=x[1],g=(0,h.useState)(!0),b=(0,r.Z)(g,2),C=b[0],N=b[1],k=(0,h.useState)({content:void 0,json:void 0,csv:void 0,csvTruncated:void 0,error:void 0}),S=(0,r.Z)(k,2),w=S[0],O=S[1],Z=le(),E=(0,r.Z)(Z,1)[0];function R(e){Ne("applyOptions",e);var t=(0,o.Z)((0,o.Z)({},p),e);m(t),N(!0),E((function(){O(we(s,n,t)),N(!1)}))}return(0,h.useEffect)((function(){E((function(){O(we(s,n,p)),N(!1)}))}),[]),(0,y.jsx)(T,{onRequestClose:a,className:"csv-export",children:(0,y.jsxs)("div",{className:"modal modal-csv-export",children:[(0,y.jsx)("div",{className:"modal-header",children:(0,y.jsxs)("h1",{children:[(0,y.jsx)(l.G,{icon:c.B3e})," CSV Export"]})}),(0,y.jsxs)("div",{className:"modal-contents",children:[(0,y.jsx)("div",{className:"modal-text",children:"Enter a name for the CSV file:"}),(0,y.jsx)("input",{type:"text",className:"regular",value:v,onChange:function(e){return j(e.target.value)}}),(0,y.jsxs)("div",{className:"modal-text",children:["Options:",(0,y.jsxs)("label",{title:"When selected, the first line of the CSV will be a header with the column names",children:[(0,y.jsx)("input",{type:"checkbox",checked:!0===p.header,onChange:function(e){R({header:e.target.checked})}})," ","Header row"]}),(0,y.jsxs)("label",{title:"When selected, an array containing objects with nested properties will be flattened",children:[(0,y.jsx)("input",{type:"checkbox",checked:p.flatten,onChange:function(e){R({flatten:e.target.checked})}})," ","Flatten nested properties"]})]}),(0,y.jsxs)("div",{className:u()("preview-area",{loading:C}),children:[(0,y.jsx)("textarea",{readOnly:!0,wrap:w.error?"":"off",className:u()("regular","csv-preview",{error:!!w.error}),value:C?"":w.error?"Error: could not parse JSON. Please close the CSV Export modal, fix your JSON document, then export to CSV again.":w.csvTruncated||""}),C&&(0,y.jsx)("div",{className:"overlay",children:(0,y.jsxs)("div",{className:"loading",children:[(0,y.jsx)(l.G,{icon:c.IJ7,spin:!0})," loading..."]})}),!C&&w.csvTruncated!==w.csv&&(0,y.jsx)("div",{className:"truncated-overlay",children:(0,y.jsxs)("div",{className:"truncated",children:[(0,y.jsx)(l.G,{icon:c.eHv})," Preview is truncated"]})})]})]}),(0,y.jsxs)("div",{className:"modal-action-menu",children:[(0,y.jsx)(ue,{data:w.csv,text:"Copy to clipboard",copiedText:"Copied to clipboard!",title:"Copy CSV data to clipboard",className:"modal-button primary"}),(0,y.jsxs)("button",{className:"modal-button primary",onClick:function(){try{var e=(0,G.B9)(v,".csv");(0,G.hI)(e,w.csv),a()}catch(n){console.error(n),(0,H.cB)(n)}},children:[(0,y.jsx)(l.G,{icon:c.r6l})," Save to disk"]}),(0,y.jsx)("button",{className:"modal-button",onClick:function(){return a()},children:"Close"})]})]})})}var Se=(0,be.X)((function(e,n){try{return{json:(0,j.nK)(e,n),error:void 0}}catch(t){return{json:void 0,error:t}}}));function we(e,n,t){try{Ne("createPreview"),console.time("parse");var o=Se(e,n),a=o.json,s=o.error;if(console.timeEnd("parse"),s)return{content:e,json:void 0,csv:void 0,csvTruncated:void 0,error:s};console.time("to csv");var r=function(e,n){var t="boolean"!==typeof n.header||n.header;if(Array.isArray(e)){var o=n.flatten?e.map((function(e){return ge(e)})):e;return new ve.Parser({header:t}).parse(o)}return new ve.Parser({header:t}).parse(n.flatten?ge(e):e)}(function(e,n){return n!==JSON?(0,Ce.vs)(e,(function(e){return e&&e.isLosslessNumber?e.toString():e})):e}(a),t);return console.timeEnd("to csv"),{content:e,json:a,csv:r,csvTruncated:"string"===typeof r?(0,xe.Z)(r,{length:m.WF,separator:"\n",omission:"\n..."}):void 0,error:void 0}}catch(s){return{content:e,json:void 0,csv:void 0,csvTruncated:void 0,error:s}}}var Oe=t(2612),Ze=t(2513),Ee=t(6422),Te=t(5286),Re=(0,g.H)("jsoneditoronline:ConfigurationModal"),Ie={text:'{\n  "text": "Preview configuration settings",\n  "boolean": true,\n  "color": "red",\n  "unicode": "\ud83d\ude00",\n  "multiline": "line1,\\nline2,\\nline3",\n  "number": 4.0,\n  "long": 18800000000000000123\n}\n'},De={json:[{id:1017,name:"Joe",address:{city:"New York",street:"Victor Plains"},scores:[8,7.2,6.7]},{id:1029,name:"Sarah",address:{city:"Manhattan",street:"Skiles Walks"},scores:[6.1,6.2,6]},{id:1022,name:"Mike",address:{city:"South Christy",street:"Norberto Crossing"},scores:[7.1,7.2]}]};function Le(e){var n=e.config,t=e.onClose,o=e.onOk,a=(0,h.useRef)(null),s=(0,h.useRef)(null),i=(0,h.useRef)(null),d=(0,h.useState)("tree"),p=(0,r.Z)(d,2),f=p[0],x=p[1],v=(0,h.useState)(n.fontSize),g=(0,r.Z)(v,2),b=g[0],C=g[1],N=(0,h.useState)("\t"===n.indentation),k=(0,r.Z)(N,2),S=k[0],w=k[1],O=(0,h.useState)("\t"===n.indentation?String(n.tabSize):"number"===typeof n.indentation?String(n.indentation):String(n.indentation.length)),Z=(0,r.Z)(O,2),E=Z[0],R=Z[1],I=(0,h.useState)(n.escapeControlCharacters),D=(0,r.Z)(I,2),L=D[0],P=D[1],J=(0,h.useState)(n.escapeUnicodeCharacters),q=(0,r.Z)(J,2),U=q[0],K=q[1],z=(0,h.useState)(n.flattenColumns),V=(0,r.Z)(z,2),M=V[0],W=V[1],F=(0,h.useState)(n.parserId),A=(0,r.Z)(F,2),B=A[0],Q=A[1],H=(0,h.useState)(!1),_=(0,r.Z)(H,2),X=_[0],$=_[1],ee=(0,h.useState)(Ie),ne=(0,r.Z)(ee,2),te=ne[0],oe=ne[1],ae=Number(E),se=S?"\t":ae,re=ae,ie={fontSize:(0,Ee.R)(b),indentation:se,tabSize:re,escapeControlCharacters:L,escapeUnicodeCharacters:U,flattenColumns:M,parserId:B},ce=X?qe(ie,E):void 0,le=(0,Te._)(B,te);function de(e){C(e),i.current&&i.current.style.setProperty("--jse-font-size-mono",function(e,n){return(0,Ee.m)(e)?e:n}((0,Ee.R)(e),n.fontSize))}function ue(e,t){var o=Ge(e,t,n.indentation);oe((0,j.IE)(te,le,o))}function he(e){var n=document.activeElement;x(e),oe("table"===e?De:Ie),setTimeout((function(){n&&n.focus()}))}function pe(e){he("text"),w(e),ue(e,E)}function me(e){he("tree"),Q(e)}function fe(){return $(!0),!qe(ie,E)&&(o(ie),ve(),!0)}function xe(){ve()}function ve(){a.current&&a.current.close(),t()}return(0,h.useEffect)((function(){s.current&&s.current.select()}),[]),(0,y.jsx)(T,{ref:a,className:"configuration",onRequestClose:xe,children:(0,y.jsxs)("div",{className:"modal modal-configuration",children:[(0,y.jsx)(Oe.Z,{}),(0,y.jsx)("h1",{children:"Configuration"}),(0,y.jsxs)("div",{className:"columns",children:[(0,y.jsx)("div",{className:"column left",children:(0,y.jsxs)("form",{onSubmit:fe,children:[(0,y.jsx)("h2",{children:"Font size"}),(0,y.jsxs)("div",{className:"modal-text",children:["Configure the font size, for example ",(0,y.jsx)("code",{children:'"14px"'})," (default) or"," ",(0,y.jsx)("code",{children:'"12pt"'}),"."]}),(0,y.jsx)("table",{children:(0,y.jsx)("tbody",{children:(0,y.jsxs)("tr",{children:[(0,y.jsx)("td",{children:"Font size:"}),(0,y.jsx)("td",{children:(0,y.jsx)("input",{ref:s,type:"text",value:b,onChange:function(e){return de(e.target.value)},className:u()("fontSize","regular",{error:null===ce||void 0===ce?void 0:ce.fontSize})})})]})})}),(null===ce||void 0===ce?void 0:ce.fontSize)&&(0,y.jsx)("div",{className:"error-message",children:ce.fontSize}),(0,y.jsx)("h2",{children:"Indentation"}),(0,y.jsx)("div",{className:"modal-text",children:"Indentation used in text mode and when copying or saving a document."}),(0,y.jsx)("table",{children:(0,y.jsxs)("tbody",{children:[(0,y.jsxs)("tr",{children:[(0,y.jsx)("td",{children:"Type of indentation:"}),(0,y.jsxs)("td",{className:"indentation-types",children:[(0,y.jsxs)("label",{children:[(0,y.jsx)("input",{type:"radio",name:"useTab",value:"spaces",checked:!S,onChange:function(){return pe(!1)}})," ","Spaces"]}),(0,y.jsxs)("label",{children:[(0,y.jsx)("input",{type:"radio",name:"useTab",value:"tabs",checked:S,onChange:function(){return pe(!0)}})," ","Tabs"]})]})]}),(0,y.jsxs)("tr",{children:[(0,y.jsx)("td",{children:S?"Tab size: ":"Number of spaces: "}),(0,y.jsx)("td",{children:(0,y.jsx)("input",{type:"text",className:u()("indentation","regular",{error:null===ce||void 0===ce?void 0:ce.indentation}),value:E,onChange:function(e){return n=e.target.value,he("text"),R(n),void ue(S,n);var n}})})]})]})}),(null===ce||void 0===ce?void 0:ce.indentation)&&(0,y.jsx)("div",{className:"error-message",children:ce.indentation}),(0,y.jsx)("h2",{children:"Escape characters"}),(0,y.jsx)("table",{children:(0,y.jsxs)("tbody",{children:[(0,y.jsx)("tr",{children:(0,y.jsx)("td",{children:(0,y.jsxs)("label",{children:[(0,y.jsx)("input",{type:"checkbox",checked:L,onChange:function(e){return n=e.target.checked,he("tree"),void P(n);var n}})," ","Escape control characters like newline ",(0,y.jsx)("code",{children:'"\\n"'})," and tab"," ",(0,y.jsx)("code",{children:'"\\t"'})," ",(0,y.jsx)("div",{className:"explanation","data-tip":"Escaping control characters is only applicable to tree mode.",children:(0,y.jsx)(l.G,{icon:c.sqG})})]})})}),(0,y.jsx)("tr",{children:(0,y.jsx)("td",{children:(0,y.jsxs)("label",{children:[(0,y.jsx)("input",{type:"checkbox",checked:U,onChange:function(e){return n=e.target.checked,"table"===f?he("tree"):oe(Ie),void K(n);var n}})," ","Escape unicode characters like smilies ","\ud83d\ude01"]})})})]})}),(0,y.jsx)("h2",{children:"Table view"}),(0,y.jsxs)("label",{children:[(0,y.jsx)("input",{type:"checkbox",checked:M,onChange:function(e){return n=e.target.checked,he("table"),void W(n);var n}})," ","Flatten nested object properties into separate columns"]}),(0,y.jsx)("h2",{children:"Parser"}),(0,y.jsx)("div",{className:"modal-text",children:"Select a JSON parser:"}),(0,y.jsx)("div",{children:(0,y.jsxs)("label",{children:[(0,y.jsx)("input",{type:"radio",name:"parserId",value:"auto",checked:B===Ze.j.auto,onChange:function(){return me(Ze.j.auto)}})," ","Auto select"," ",(0,y.jsx)("div",{className:"explanation","data-tip":"Selects the Lossless JSON Parser for documents up to ".concat((0,G.BU)(m.Ax),", ")+" and selects the fast Native JSON Parser for larger documents.",children:(0,y.jsx)(l.G,{icon:c.sqG})})]})}),(0,y.jsx)("div",{children:(0,y.jsxs)("label",{children:[(0,y.jsx)("input",{type:"radio",name:"parserId",value:"native",checked:B===Ze.j.native,onChange:function(){return me(Ze.j.native)}})," ","Native JSON Parser"," ",(0,y.jsx)("div",{className:"explanation","data-tip":"The Native JSON parser uses the browser's built-in JSON parser. This parser is very fast, but cannot handle long numbers.",children:(0,y.jsx)(l.G,{icon:c.sqG})})]})}),(0,y.jsx)("div",{children:(0,y.jsxs)("label",{children:[(0,y.jsx)("input",{type:"radio",name:"parserId",value:"lossless",checked:B===Ze.j.lossless,onChange:function(){return me(Ze.j.lossless)}})," ","Lossless JSON Parser"," ",(0,y.jsx)("div",{className:"explanation","data-tip":"The Lossless JSON parser can handle long numbers and maintains the formatting of numbers. "+"The parser is slower than the Native JSON parser, which is noticeable for documents larger than ".concat((0,G.BU)(m.Ax),"."),children:(0,y.jsx)(l.G,{icon:c.sqG})})]})}),B!==n.parserId&&(0,y.jsxs)("div",{className:"reload-warning",children:[(0,y.jsx)("div",{className:"reload-message",children:"The selected parser will be used after reloading the web application."}),(0,y.jsx)("div",{children:(0,y.jsx)("button",{className:"modal-button primary",onClick:function(){Re("save and reload"),fe()&&window.location.reload()},children:"Save config and reload now"})})]})]})}),(0,y.jsxs)("div",{className:"column right",children:[(0,y.jsx)("h2",{children:"Preview"}),(0,y.jsx)("div",{className:"preview-container",ref:i,children:(0,y.jsx)(Y,{mode:f,content:te,onChange:oe,onChangeMode:x,flattenColumns:M,parser:le,indentation:Ge(S,E,n.indentation),tabSize:Je(E,n.tabSize),escapeControlCharacters:L,escapeUnicodeCharacters:U},B)})]})]}),(0,y.jsxs)("div",{className:"modal-action-menu",children:[(0,y.jsx)("button",{className:"modal-button",onClick:xe,children:"Cancel"}),(0,y.jsx)("button",{className:"modal-button primary",onClick:fe,children:"Ok"})]})]})})}function Pe(e){return function(e){return!isNaN(e)&&isFinite(e)&&e>0&&Math.round(e)===e}(Number(e))}function Ge(e,n,t){var o=Number(n);return e?"\t":Pe(o)?o:t}function Je(e,n){var t=Number(e);return Pe(t)?t:n}function qe(e,n){var t={fontSize:void 0,indentation:void 0};return(0,Ee.m)(e.fontSize)||(t.fontSize='Error: invalid font size. Must be an integer number between 10 and 99 with an optional suffix "px" or "pt".'),Pe(n)||(t.indentation="Error: value must be a positive integer number"),Object.keys(t).some((function(e){return void 0!==t[e]}))?t:void 0}function Ue(e){return"string"===typeof e&&e.startsWith(m.vB)}var Ke=t(4403),ze=(0,g.H)("jsoneditoronline:JSONEditorPanel"),Ve={json:""};function Me(e){var n=e.panelId,t=e.jsonEditorRef,d=e.setJsonEditorRef,g=e.mode,S=e.setMode,w=e.focus,O=e.setFocus,Z=e.loading,E=e.error,T=e.localStorageError,R=e.unsavedChanges,I=e.document,D=e.compoundKey,P=e.diff,G=e.parser,J=e.indentation,U=e.setIndentation,K=e.parserId,z=e.setParserId,V=e.tabSize,A=e.setTabSize,B=e.fontSize,Q=e.setFontSize,_=e.formattingOnSave,X=e.setFormattingOnSave,$=e.escapeControlCharacters,ee=e.setEscapeControlCharacters,ne=e.escapeUnicodeCharacters,te=e.setEscapeUnicodeCharacters,oe=e.flattenColumns,ae=e.setFlattenColumns,se=e.updateDocument,ie=e.newDocument,ce=e.updateDocumentProperties,le=e.renameDocument,de=e.loadDocument,ue=e.loadFromDisk,he=e.loadFromUrl,pe=e.saveToCloud,fe=e.saveToDisk,xe=e.saveToUrl,ve=e.saveChanges,je=e.closeAndDeleteDocument,ge=e.queryLanguageId,be=e.onChangeQueryLanguage,Ce=e.allPanels,Ne=(0,h.useState)(!1),ye=(0,r.Z)(Ne,2),Se=ye[0],we=ye[1],Ze=(0,h.useState)(!1),Ee=(0,r.Z)(Ze,2),Te=Ee[0],Re=Ee[1],Ie=(0,h.useState)(!1),De=(0,r.Z)(Ie,2),Pe=De[0],Ge=De[1],Je=(0,h.useState)(!1),qe=(0,r.Z)(Je,2),Me=qe[0],Fe=qe[1],Ae=(0,h.useRef)(null),Be=(0,h.useRef)(null),Qe=(0,h.useRef)(null),He=function(e,n,t){e||(e=C);var o=(0,f.r5)(j.Tq,[e.compoundKey]),a=JSON,s="URL"===e.type?e.url:null,r=(0,f.r5)(v.c6,[s]);if((0,h.useEffect)((function(){b("schema config changed",{schemaConfig:e})}),[e]),e)try{if("TEXT"===e.type)return{loading:!1,error:null,content:N((0,j.nK)(e.content,a))};if("DOCUMENT"===e.type)return{loading:"loading"===o.status,error:o.error,content:o.result&&"loading"!==o.status?N((0,j.nK)(o.result.content,a)):null};if("URL"===e.type)return{loading:"loading"===r.status,error:r.error,content:"loading"!==r.status?N(r.result):null};if("PANEL"===e.type){if(e.panelId===n)return{loading:!1,error:"Error: Cannot select panel itself as JSON schema.",content:null};var i=t.find((function(n){return n.panelId===e.panelId}));return i?{loading:!1,error:null,content:N((0,j.nK)(i.document.content,a))}:{loading:!1,error:'Error: Panel with id "'.concat(e.panelId,'" not found.'),content:null}}}catch(c){return{loading:!1,error:c.toString(),content:null}}return{loading:!1,error:null,content:null}}(I.schema,n,Ce),_e=(0,Ke.ZP)(),Xe=_e.observe,Ye=_e.width,$e=(0,Ke.ZP)(),en=$e.observe,nn=$e.width,tn=I?I.content:Ve,on=Ye-nn,an=on-40>608,sn=on-(an?608:291)>170,rn=on-40-291<0,cn=R&&!T,ln=function(){ie()},dn=(0,h.useCallback)((0,s.Z)((0,a.Z)().mark((function e(){return(0,a.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:M({onOpen:function(){var e=(0,s.Z)((0,a.Z)().mark((function e(n){return(0,a.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return ze("onOpen",{compoundKey:n}),e.next=3,de(n);case 3:case"end":return e.stop()}}),e)})));return function(n){return e.apply(this,arguments)}}(),onDelete:je});case 1:case"end":return e.stop()}}),e)}))),[de,je]),un=(0,h.useCallback)((0,s.Z)((0,a.Z)().mark((function e(){return(0,a.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,ve({force:!0,silent:!1});case 2:case"end":return e.stop()}}),e)}))),[ve]),hn=(0,h.useCallback)((0,s.Z)((0,a.Z)().mark((function e(){return(0,a.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!(0,j.Rn)(D)){e.next=5;break}return e.next=3,pe();case 3:e.next=6;break;case 5:F({title:"Save to cloud",text:"Enter a name for the document:",value:I.name||"New document",textOk:"Save",onOk:function(){var e=(0,s.Z)((0,a.Z)().mark((function e(n){return(0,a.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,ce({name:n});case 2:return e.next=4,pe();case 4:yn();case 5:case"end":return e.stop()}}),e)})));return function(n){return e.apply(this,arguments)}}()});case 6:case"end":return e.stop()}}),e)}))),[D,I.name,ce,pe]),pn=function(){var e=(0,s.Z)((0,a.Z)().mark((function e(){return(0,a.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:F({title:"Save to disk",text:"Enter a name for the document:",value:I.name||"New document",optionText:"Indentation",optionTitle:"Select whether to format or compact the data before saving",optionValue:_,optionOptions:m.JC,optionChange:X,textOk:"Save",onOk:function(e,n){t.acceptAutoRepair(),setTimeout((function(){fe(e,n),yn()}))}});case 1:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();var mn=function(){var e=(0,s.Z)((0,a.Z)().mark((function e(){return(0,a.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:F({className:"save-url-prompt",title:"Save to url",text:(0,y.jsxs)("div",{children:[(0,y.jsx)("p",{children:"Enter a public url of a server."}),(0,y.jsx)("p",{children:"When clicking Save, an HTTP POST request will be send to the selected url with the JSON document as body. The url must be secure (https), must not require authentication, and must have CORS enabled."})]}),value:I.savedToUrl||I.loadedFromUrl||"",optionText:"Indentation",optionTitle:"Select whether to format or compact the data before saving",optionValue:_,optionOptions:m.JC,optionChange:X,textOk:"Save",onOk:function(e,n){t.acceptAutoRepair(),setTimeout((function(){xe(e,n),yn()}))}});case 1:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();function fn(e){return xn.apply(this,arguments)}function xn(){return(xn=(0,s.Z)((0,a.Z)().mark((function e(n){var o,s,r;return(0,a.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,o=t.acceptAutoRepair(),s=(0,j.ho)(o,G,n,J),e.next=5,navigator.clipboard.writeText(s);case 5:yn(),(0,H.t5)("Document copied to clipboard"),e.next=12;break;case 9:e.prev=9,e.t0=e.catch(0),n===m.Di.FORMAT||n===m.Di.COMPACT?(r="Failed to ".concat(n," the document. ")+'Fix the document and click copy again, or use "Copy as-is". '+e.t0.toString(),console.error(r),(0,H.cB)(r)):(console.error(e.t0),(0,H.cB)(e.t0));case 12:case"end":return e.stop()}}),e,null,[[0,9]])})))).apply(this,arguments)}var vn=(0,h.useCallback)(function(){var e=(0,s.Z)((0,a.Z)().mark((function e(n){return(0,a.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,se((0,o.Z)((0,o.Z)({},I),{},{content:n}));case 2:case"end":return e.stop()}}),e)})));return function(n){return e.apply(this,arguments)}}(),[se,I]),jn=(0,h.useCallback)((function(e){var n=e.length>0?"/"+e.join("/"):"",t=P[n];if(t)return"diff-".concat(t)}),[P]);function gn(){re({indentation:J,queryLanguageId:ge,onChangeQueryLanguage:be,initialSchema:I.schema,panelId:n,allPanels:Ce,onOk:function(e){ze("Selected JSON Schema",e),se((0,o.Z)((0,o.Z)({},I),{},{schema:e}),!0)}})}var bn=(0,h.useCallback)((function(){q({document:I,compoundKey:D})}),[I,D]);var Cn,Nn=(0,j.Rn)(D)?"Rename document. Document is stored in the cloud":"Rename document. Document is stored locally in your browser";function yn(){t&&t.focus&&t.focus()}function kn(){ze("closeFullScreen"),Fe(!1),Qe.current&&(Qe.current.destroy(),Qe.current=null)}return(0,h.useEffect)((function(){function e(e){return t.apply(this,arguments)}function t(){return(t=(0,s.Z)((0,a.Z)().mark((function e(n){var t;return(0,a.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t=n.key.toUpperCase(),!n.ctrlKey||n.shiftKey||"S"!==t){e.next=6;break}return n.preventDefault(),n.stopPropagation(),e.next=6,un();case 6:if(!n.ctrlKey||n.shiftKey||"O"!==t){e.next=11;break}return n.preventDefault(),n.stopPropagation(),e.next=11,dn();case 11:n.ctrlKey&&n.altKey&&!n.shiftKey&&"I"===t&&(n.preventDefault(),n.stopPropagation(),bn());case 12:case"end":return e.stop()}}),e)})))).apply(this,arguments)}if(w)return ze("addEventListener for global keydown panelId:",n),window.document.body.addEventListener("keydown",e),function(){ze("removeEventListener for global keydown panelId:",n),window.document.body.removeEventListener("keydown",e)}}),[w,n,dn,un,bn]),(0,y.jsxs)("div",{className:"panel",ref:Xe,children:[(0,y.jsxs)(p.FileDrop,{onDrop:function(e){return ue(e[0])},children:[(0,y.jsx)("div",{className:"drag-space-before"}),(0,y.jsx)("div",{className:"drag-info",children:"Drag 'n drop your JSON document here..."}),(0,y.jsx)("div",{className:"drag-space-after"})]}),(0,y.jsxs)("div",{className:u()("panel-menu",{wrap:rn}),children:[(0,y.jsxs)("div",{className:"document-details",ref:en,children:[(0,y.jsx)("div",{className:"local-storage-error-icon","data-tip":String(T),style:{display:T?"":"none"},children:(0,y.jsx)(l.G,{icon:c.eHv})}),I.schema&&"NONE"!==I.schema.type&&(0,y.jsxs)("button",{className:u()("menu-button schema",{error:He.error}),disabled:Z||E,onClick:gn,title:He.error?"Failed to load JSON Schema: ".concat(He.error):He.loading?"Loading JSON schema...":"This document is validated against a JSON schema. Click to view or change the schema.",children:[He.loading?(0,y.jsx)(l.G,{icon:c.IJ7,spin:!0,fixedWidth:!0}):(0,y.jsx)(We,{backgroundColor:"#6f9970"}),He.error&&(0,y.jsx)("span",{className:"error",children:"Error"})]}),!Z&&I&&I._id?(0,y.jsxs)("button",{disabled:Z||E,className:u()("menu-button name",{unnamed:!I.name}),title:Nn,onClick:function(){F({title:"Rename",text:"Enter a new name for the document:",value:I.name||"New document",onOk:le})},children:[(0,j.Rn)(D)?(0,y.jsx)(l.G,{icon:c.uM9}):null,I.name,(0,y.jsx)(l.G,{icon:c.Xcf})]}):null]}),sn?(0,y.jsxs)("div",{className:u()("unsaved-changes",{visible:cn}),children:["changed (",(0,y.jsx)("button",{className:"save-now",onClick:un,children:"save now"}),")"]}):(0,y.jsx)("button",{className:u()("menu-button unsaved-changes",{visible:cn}),onClick:un,title:"There are unsaved changes. Click to save now.",children:(0,y.jsx)(l.G,{icon:i.r6l})}),(0,y.jsx)("div",{className:"space"}),(0,y.jsxs)("div",{className:"buttons",children:[(0,y.jsxs)("button",{className:"menu-button",disabled:Z,onClick:ln,title:"Open a new, empty document",children:[(0,y.jsx)(l.G,{icon:c.gMD}),an&&" New"]}),(0,y.jsxs)("div",{className:"menu-button dropdown-button",children:[(0,y.jsx)(l.G,{icon:c.cC_}),an&&" Open"," ",(0,y.jsx)(l.G,{icon:c.eW2}),(0,y.jsxs)("div",{className:"dropdown-menu right",children:[(0,y.jsxs)("button",{className:"dropdown-menu-button",disabled:Z,onClick:dn,title:"Open a recent document from the cloud or local storage",children:[(0,y.jsx)(l.G,{icon:c.cC_,fixedWidth:!0})," Open recent file"]}),(0,y.jsx)("input",{type:"file",ref:Ae,onChange:function(e){return ue(e.target.files[0])},style:{display:"none"}}),(0,y.jsxs)("button",{className:"dropdown-menu-button",disabled:Z,onClick:function(){return Ae.current.click()},title:"Open a document from disk",children:[(0,y.jsx)(l.G,{icon:c.aNY,fixedWidth:!0})," Open from disk"]}),(0,y.jsxs)("button",{className:"dropdown-menu-button",disabled:Z,onClick:function(){Ge(!0)},title:"Open a document from url",children:[(0,y.jsx)(l.G,{icon:c.nNP,fixedWidth:!0})," Open from url"]})]})]}),(0,y.jsxs)("div",{className:"menu-button dropdown-button",children:[(0,y.jsx)(l.G,{icon:c.r6l}),an&&" Save"," ",(0,y.jsx)(l.G,{icon:c.eW2}),(0,y.jsxs)("div",{className:"dropdown-menu right",children:[(0,y.jsxs)("button",{className:"dropdown-menu-button",disabled:Z||E,onClick:hn,title:"Save this document in the cloud",children:[(0,y.jsx)(l.G,{icon:c.uM9,fixedWidth:!0})," Save to cloud"]}),(0,y.jsxs)("button",{className:"dropdown-menu-button",disabled:Z||E,onClick:pn,title:"Save this document to disk",children:[(0,y.jsx)(l.G,{icon:c.aNY,fixedWidth:!0})," Save to disk"]}),(0,y.jsxs)("button",{className:"dropdown-menu-button",disabled:Z||E,onClick:mn,title:"Save this document to a public url",children:[(0,y.jsx)(l.G,{icon:c.nNP,fixedWidth:!0})," Send to url"]}),(0,y.jsx)("div",{className:"dropdown-menu-separator"}),(0,y.jsxs)("button",{className:"dropdown-menu-button",disabled:Z||E,onClick:function(){we(!0)},title:"Export the JSON document to CSV (comma separated values)",children:[(0,y.jsx)(l.G,{icon:c.B3e,fixedWidth:!0})," Export to CSV"]})]})]}),(0,y.jsxs)("div",{className:"menu-button dropdown-button dropdown-with-default",children:[(0,y.jsxs)("button",{className:"dropdown-menu-button-default",disabled:Z,onClick:function(){return fn(m.Di.KEEP)},title:"Copy this document to the system clipboard",children:[(0,y.jsx)(l.G,{icon:c.kZ_}),an&&" Copy"," ",(0,y.jsx)(l.G,{icon:c.eW2})]}),(0,y.jsxs)("div",{className:"dropdown-menu",children:[(0,y.jsxs)("button",{className:"dropdown-menu-button",disabled:Z,onClick:function(){return fn(m.Di.FORMAT)},title:"Copy this document to the system clipboard in formatted form",children:[(0,y.jsx)(l.G,{icon:c.kZ_})," Copy formatted"]}),(0,y.jsxs)("button",{className:"dropdown-menu-button",disabled:Z,onClick:function(){return fn(m.Di.COMPACT)},title:"Copy this document to the system clipboard in compacted form",children:[(0,y.jsx)(l.G,{icon:c.kZ_})," Copy compacted"]}),(0,y.jsxs)("button",{className:"dropdown-menu-button",disabled:Z,onClick:function(){return fn(m.Di.KEEP)},title:"Copy this document to the system clipboard without changing indentation",children:[(0,y.jsx)(l.G,{icon:c.kZ_})," Copy as-is"]})]})]}),(0,y.jsxs)("div",{className:"menu-button dropdown-button",children:[(0,y.jsx)(l.G,{icon:c.b7W}),an&&" Options"," ",(0,y.jsx)(l.G,{icon:c.eW2}),(0,y.jsxs)("div",{className:"dropdown-menu",children:[(0,y.jsxs)("button",{className:"dropdown-menu-button",disabled:Z||E,onClick:gn,title:"Configure a JSON schema to validate this document",children:[(0,y.jsx)(We,{})," Configure JSON Schema"]}),(0,y.jsxs)("button",{className:"dropdown-menu-button",onClick:function(){Re(!0)},title:"Change configuration: fontSize, indentation, escaping of special characters",children:[(0,y.jsx)(l.G,{icon:c.gr5,fixedWidth:!0})," Configure editor"]}),(0,y.jsxs)("button",{className:"dropdown-menu-button",disabled:Z||E,onClick:bn,title:"See document properties (Ctrl+Alt+I)",children:[(0,y.jsx)(l.G,{icon:c.YHc,fixedWidth:!0})," Document properties"]}),(0,y.jsxs)("button",{className:"dropdown-menu-button",disabled:Z||E||!I._id,onClick:function(){L({title:"Delete document",text:'Are you sure you want to delete document "'.concat(I.name,'"?'),textOk:"Delete",classOk:"danger",onOk:function(){je(D)}})},title:"Delete document",children:[(0,y.jsx)(l.G,{icon:c.NBC,fixedWidth:!0})," Delete document"]})]})]}),(0,y.jsxs)("button",{className:"menu-button",disabled:Z||E,onClick:function(){me({document:I,compoundKey:D})},title:"Share",children:[(0,y.jsx)(l.G,{icon:c.EfQ}),an&&" Share"]}),(0,y.jsxs)("button",{className:"menu-button",disabled:Z||E,onClick:function(){ze("openFullScreen"),window.disablePageScroll&&(ze("disabling page scroll"),window.disablePageScroll()),Fe(!0),Qe.current=(0,x._n)(null,kn)},title:"Show the editor full screen (ESC to exit)",children:[(0,y.jsx)(l.G,{icon:c.HHh}),an&&" Full screen"]})]})]}),(0,y.jsxs)("div",{className:u()("panel-contents",{error:E,"full-screen":Me}),children:[(0,y.jsx)(Y,{id:n,onJsonEditorRef:function(e){d(e),Be.current=e,ze("new ref",e)},mode:g,parser:G,indentation:J,tabSize:V,escapeControlCharacters:$,escapeUnicodeCharacters:ne,flattenColumns:oe,content:tn,queryLanguageId:ge,onChangeQueryLanguage:be,onChange:vn,onChangeMode:S,onClassName:P?jn:void 0,onRenderMenu:function(e,n){if(!n.modal&&Me)return e.concat({type:"button",icon:c.AL,title:"Exit full screen (ESC)",onClick:kn})},onFocus:function(){return O(!0)},onBlur:function(){return O(!1)},schema:He.content}),Z?(0,y.jsx)("div",{className:"overlay",children:(0,y.jsxs)("div",{className:"loading",children:[(0,y.jsx)(l.G,{icon:c.IJ7,spin:!0,fixedWidth:!0})," loading..."]})}):null,E?(0,y.jsx)("div",{className:"overlay",children:(0,y.jsx)(k,{error:E,onNew:ln})}):null]}),Se&&(0,y.jsx)(ke,{parser:G,document:I,onClose:function(){return we(!1)}}),Te&&(0,y.jsx)(Le,{config:{fontSize:B,indentation:J,tabSize:V,escapeControlCharacters:$,escapeUnicodeCharacters:ne,flattenColumns:oe,parserId:K},onOk:function(e){ze("configuration updated",e),Q(e.fontSize),U(e.indentation),A(e.tabSize),ee(e.escapeControlCharacters),te(e.escapeUnicodeCharacters),ae(e.flattenColumns),z(e.parserId)},onClose:function(){return Re(!1)}}),Pe&&(0,y.jsx)(W,{className:"open-url-prompt",title:"Open url",text:(0,y.jsxs)("div",{children:[(0,y.jsx)("p",{children:"Enter a public url."}),(0,y.jsx)("p",{children:"Urls which are unsecure (http) or do not have CORS enabled can be loaded via the proxy when they have a public url. Urls which need authentication cannot be loaded."})]}),value:I.loadedFromUrl?(Cn=I.loadedFromUrl,Ue(Cn)?decodeURIComponent(Cn.substring(m.vB.length)):Cn):"",checkboxText:"Use proxy",checkboxTitle:"The request will be routed via the backend of jsoneditoronline.org to work around unsecure urls (http) and CORS limitations",checkboxValue:Ue(I.loadedFromUrl),textOk:"Open",onOk:function(e,n,t){ze("Open from url",{url:e,optionValue:n,checkboxValue:t});var o=t?function(e){return m.vB+encodeURIComponent(e)}(e):e;he("url.".concat(o))},onClose:function(){return Ge(!1)}}),(0,y.jsx)(Oe.Z,{})]})}function We(e){var n=!1!==e.valid,t={color:e.backgroundColor||"white",position:"absolute",bottom:2,left:4,fontSize:"60%"};return(0,y.jsxs)("div",{style:{position:"relative",display:"inline-block"},children:[(0,y.jsx)(l.G,{icon:c.gMD,fixedWidth:!0}),(0,y.jsx)(l.G,{style:t,icon:n?c.LEp:c.NBC,fixedWidth:!0})]})}}}]);
//# sourceMappingURL=797.a07f5eb7.chunk.js.map